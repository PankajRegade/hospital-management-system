<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin 路 Patients - AXES Hospital</title>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">

    <style>
        *{margin:0;padding:0;box-sizing:border-box}
        html{scroll-behavior:smooth;}

        body{
            font-family:'Poppins',sans-serif;
            background:#0a192f;
            color:#e2e8f0;
            min-height:100vh;
            padding:24px;
            overflow-x:hidden;
            position:relative;
        }

        /* Mesh gradient background with aurora effect */
        body::before{
            content:'';
            position:fixed;
            inset:0;
            background:
                radial-gradient(circle at 15% 20%, rgba(255,107,107,0.15), transparent 40%),
                radial-gradient(circle at 85% 30%, rgba(255,200,87,0.12), transparent 40%),
                radial-gradient(circle at 50% 70%, rgba(72,219,251,0.15), transparent 45%),
                radial-gradient(circle at 30% 80%, rgba(147,51,234,0.12), transparent 40%);
            z-index:0;
            pointer-events:none;
            animation:aurora 15s ease-in-out infinite;
        }

        body::after{
            content:'';
            position:fixed;
            inset:0;
            background:
                repeating-linear-gradient(
                    45deg,
                    transparent,
                    transparent 60px,
                    rgba(255,200,87,0.03) 60px,
                    rgba(255,200,87,0.03) 120px
                );
            z-index:0;
            pointer-events:none;
            animation:slide 20s linear infinite;
        }

        @keyframes aurora{
            0%,100%{
                filter:hue-rotate(0deg) brightness(1);
                transform:scale(1) rotate(0deg);
            }
            33%{
                filter:hue-rotate(20deg) brightness(1.1);
                transform:scale(1.05) rotate(2deg);
            }
            66%{
                filter:hue-rotate(-15deg) brightness(0.95);
                transform:scale(0.98) rotate(-1deg);
            }
        }

        @keyframes slide{
            0%{transform:translateX(0) translateY(0)}
            100%{transform:translateX(120px) translateY(120px)}
        }

        @keyframes bounce{
            0%,100%{transform:translateY(0) scale(1)}
            50%{transform:translateY(-5px) scale(1.02)}
        }

        @keyframes slideInLeft{
            from{opacity:0;transform:translateX(-30px)}
            to{opacity:1;transform:translateX(0)}
        }

        @keyframes slideInUp{
            from{opacity:0;transform:translateY(30px)}
            to{opacity:1;transform:translateY(0)}
        }

        @keyframes scaleIn{
            from{opacity:0;transform:scale(0.9)}
            to{opacity:1;transform:scale(1)}
        }

        @keyframes blink{
            0%,100%{opacity:1}
            50%{opacity:0.3}
        }

        .container{
            max-width:1400px;
            margin:0 auto;
            position:relative;
            z-index:1;
        }

        /* NAVBAR */
        .navbar{
            background:rgba(15,35,56,0.85);
            backdrop-filter:blur(16px);
            border-radius:20px;
            padding:16px 26px;
            margin-bottom:28px;
            border:1px solid rgba(255,200,87,0.2);
            display:flex;
            justify-content:space-between;
            align-items:center;
            box-shadow:0 8px 32px rgba(0,0,0,0.5);
            animation:slideInUp 0.6s ease;
        }

        .navbar-brand{
            display:flex;
            align-items:center;
            gap:12px;
            font-weight:700;
            font-size:22px;
            text-decoration:none;
            background:linear-gradient(135deg, #ff6b6b, #ffc857);
            -webkit-background-clip:text;
            -webkit-text-fill-color:transparent;
            background-clip:text;
            transition:all 0.3s ease;
        }

        .navbar-brand:hover{
            filter:brightness(1.2);
        }

        .navbar-brand-icon{
            width:42px;
            height:42px;
            border-radius:12px;
            display:flex;
            align-items:center;
            justify-content:center;
            background:linear-gradient(135deg,#ff6b6b,#ffc857);
            color:white;
            box-shadow:0 8px 24px rgba(255,107,107,0.5);
        }

        .navbar-actions{
            display:flex;
            gap:12px;
            flex-wrap:wrap;
            align-items:center;
        }

        .nav-btn{
            padding:10px 20px;
            font-size:13px;
            font-weight:600;
            border-radius:12px;
            border:1px solid rgba(72,219,251,0.3);
            background:rgba(15,35,56,0.7);
            color:#48dbfb;
            text-decoration:none;
            display:inline-flex;
            align-items:center;
            gap:8px;
            transition:all 0.3s cubic-bezier(0.4,0,0.2,1);
            position:relative;
        }

        .nav-btn:hover{
            border-color:#48dbfb;
            background:rgba(72,219,251,0.1);
            transform:translateY(-2px);
        }

        .nav-btn-primary{
            border:none;
            background:linear-gradient(135deg,#ff6b6b,#ffc857);
            color:white;
            font-weight:600;
            box-shadow:0 8px 24px rgba(255,107,107,0.4);
        }

        .nav-btn-danger{
            border:1px solid rgba(239,68,68,0.4);
            background:rgba(239,68,68,0.1);
            color:#ff6b6b;
        }

        .nav-btn-danger:hover{
            background:rgba(239,68,68,0.2);
            box-shadow:0 8px 24px rgba(239,68,68,0.4);
        }

        .nav-btn-active{
            background:rgba(72,219,251,0.18);
            border-color:#48dbfb;
            color:#e2e8f0;
        }

        /* PAGE HEADER */
        .page-header{
            margin-bottom:28px;
            display:flex;
            justify-content:space-between;
            gap:20px;
            flex-wrap:wrap;
            align-items:center;
            animation:slideInLeft 0.6s ease 0.2s both;
        }

        .page-title{
            font-size:36px;
            font-weight:800;
            background:linear-gradient(135deg, #ff6b6b, #ffc857, #48dbfb);
            -webkit-background-clip:text;
            -webkit-text-fill-color:transparent;
            background-clip:text;
            display:flex;
            align-items:center;
            gap:12px;
            animation:bounce 3s ease-in-out infinite;
        }

        .page-subtitle{
            font-size:15px;
            color:#94a3b8;
            margin-top:6px;
            font-weight:400;
        }

        .pill{
            padding:10px 18px;
            border-radius:12px;
            font-size:11px;
            text-transform:uppercase;
            letter-spacing:0.12em;
            background:rgba(15,35,56,0.85);
            border:1px solid rgba(255,200,87,0.3);
            color:#ffc857;
            box-shadow:0 4px 16px rgba(255,200,87,0.2);
            font-weight:600;
        }

        /* ALERT */
        .alert{
            background:linear-gradient(135deg, rgba(72,219,251,0.15), rgba(16,185,129,0.15));
            border-left:4px solid #48dbfb;
            padding:16px 20px;
            border-radius:16px;
            margin-bottom:20px;
            color:#48dbfb;
            font-size:14px;
            font-weight:500;
            box-shadow:0 4px 16px rgba(72,219,251,0.2);
            border:1px solid rgba(72,219,251,0.3);
        }

        /* STATS GRID */
        .stats-grid{
            display:grid;
            grid-template-columns:repeat(auto-fit,minmax(220px,1fr));
            gap:22px;
            margin-bottom:32px;
        }

        .stat-card{
            position:relative;
            padding:24px;
            border-radius:20px;
            background:rgba(15,35,56,0.85);
            border:1px solid rgba(72,219,251,0.2);
            box-shadow:0 8px 32px rgba(0,0,0,0.4);
            overflow:hidden;
            transition:all 0.4s cubic-bezier(0.4,0,0.2,1);
            animation:scaleIn 0.5s ease both;
        }

        .stat-card::before{
            content:'';
            position:absolute;
            top:-50%;
            right:-50%;
            width:200%;
            height:200%;
            background:conic-gradient(from 0deg, transparent, rgba(255,200,87,0.1), transparent 30%);
            opacity:0;
            transition:opacity 0.4s ease;
        }

        .stat-card:hover::before{
            opacity:1;
        }

        .stat-card:hover{
            transform:translateY(-8px);
            border-color:#ffc857;
            box-shadow:0 16px 48px rgba(255,200,87,0.3);
        }

        .stat-label{
            font-size:12px;
            text-transform:uppercase;
            letter-spacing:0.12em;
            color:#94a3b8;
            margin-bottom:8px;
            font-weight:600;
        }

        .stat-value{
            font-size:34px;
            font-weight:800;
            background:linear-gradient(135deg, #48dbfb, #ffc857);
            -webkit-background-clip:text;
            -webkit-text-fill-color:transparent;
            background-clip:text;
            margin-bottom:4px;
        }

        .stat-extra{
            font-size:12px;
            color:#10b981;
            display:flex;
            align-items:center;
            gap:6px;
            font-weight:600;
        }

        .stat-icon{
            width:46px;
            height:46px;
            border-radius:14px;
            display:flex;
            align-items:center;
            justify-content:center;
            margin-bottom:14px;
            background:linear-gradient(135deg,#ff6b6b,#ffc857);
            font-size:20px;
            color:white;
            box-shadow:0 8px 24px rgba(255,107,107,0.5);
        }

        /* MAIN CARD */
        .card{
            background:rgba(15,35,56,0.85);
            border-radius:20px;
            border:1px solid rgba(72,219,251,0.2);
            padding:26px;
            box-shadow:0 8px 32px rgba(0,0,0,0.4);
            margin-bottom:22px;
            animation:slideInUp 0.6s ease 0.3s both;
        }

        .card-header{
            display:flex;
            justify-content:space-between;
            align-items:center;
            gap:16px;
            margin-bottom:22px;
            flex-wrap:wrap;
        }

        .card-title{
            font-size:22px;
            font-weight:700;
            color:#e2e8f0;
            display:flex;
            align-items:center;
            gap:10px;
        }

        .card-sub{
            font-size:13px;
            color:#94a3b8;
            margin-top:4px;
            font-weight:400;
        }

        .badge-count{
            font-size:11px;
            padding:8px 14px;
            border-radius:10px;
            background:rgba(255,200,87,0.15);
            color:#ffc857;
            border:1px solid rgba(255,200,87,0.3);
            font-weight:700;
        }

        /* SEARCH INPUT */
        .search-input{
            width:100%;
            max-width:320px;
            padding:12px 16px 12px 40px;
            border-radius:12px;
            border:1px solid rgba(148,163,184,0.45);
            background:rgba(10,25,47,0.9);
            color:#e2e8f0;
            font-size:13px;
            outline:none;
            transition:all 0.3s ease;
            position:relative;
        }

        .search-wrapper{
            position:relative;
        }

        .search-wrapper i{
            position:absolute;
            left:12px;
            top:50%;
            transform:translateY(-50%);
            color:#64748b;
            font-size:14px;
        }

        .search-input::placeholder{
            color:#64748b;
        }

        .search-input:focus{
            border-color:#48dbfb;
            box-shadow:0 0 0 1px rgba(72,219,251,0.5);
            background:rgba(15,35,56,0.95);
        }

        /* TABLE */
        .table-wrapper{
            overflow-x:auto;
            border-radius:16px;
            border:1px solid rgba(72,219,251,0.2);
            box-shadow:0 4px 16px rgba(0,0,0,0.3);
        }

        table{
            width:100%;
            border-collapse:collapse;
            min-width:700px;
        }

        thead{
            background:linear-gradient(135deg,rgba(255,107,107,0.4),rgba(255,200,87,0.4));
            backdrop-filter:blur(10px);
        }

        th{
            padding:16px 18px;
            text-align:left;
            font-size:11px;
            text-transform:uppercase;
            letter-spacing:0.12em;
            color:#e2e8f0;
            font-weight:700;
            border-bottom:1px solid rgba(255,200,87,0.3);
        }

        td{
            padding:16px 18px;
            font-size:14px;
            color:#cbd5e1;
            border-bottom:1px solid rgba(30,58,88,0.5);
            background:rgba(10,25,47,0.6);
            font-weight:400;
        }

        tbody tr{
            transition:all 0.3s cubic-bezier(0.4,0,0.2,1);
        }

        tbody tr:hover td{
            background:rgba(15,35,56,0.8);
            transform:translateX(5px);
        }

        .badge{
            display:inline-flex;
            align-items:center;
            justify-content:center;
            min-width:32px;
            height:32px;
            border-radius:10px;
            font-size:12px;
            background:rgba(72,219,251,0.15);
            border:1px solid rgba(72,219,251,0.3);
            color:#48dbfb;
            font-weight:700;
            box-shadow:0 4px 12px rgba(72,219,251,0.3);
        }

        td strong{
            color:#e2e8f0;
            font-weight:600;
            font-size:15px;
        }

        .email-cell{
            color:#7dd3fc !important;
            font-weight:500;
        }

        .phone-cell{
            color:#cbd5e1;
            font-weight:500;
            display:flex;
            align-items:center;
            gap:8px;
        }

        .phone-cell i{
            color:#10b981;
            font-size:14px;
        }

        .status-indicator{
            display:inline-block;
            width:8px;
            height:8px;
            border-radius:50%;
            margin-right:8px;
            animation:blink 2s ease-in-out infinite;
        }

        .status-active{
            background:#10b981;
            box-shadow:0 0 10px rgba(16,185,129,0.8);
        }

        .actions{
            display:flex;
            flex-wrap:wrap;
            gap:10px;
        }

        .btn{
            border:none;
            padding:10px 16px;
            border-radius:12px;
            font-size:12px;
            font-weight:700;
            cursor:pointer;
            display:inline-flex;
            align-items:center;
            gap:6px;
            text-decoration:none;
            transition:all 0.3s cubic-bezier(0.4,0,0.2,1);
            white-space:nowrap;
            position:relative;
            overflow:hidden;
        }

        .btn::before{
            content:'';
            position:absolute;
            top:50%;
            left:50%;
            width:0;
            height:0;
            border-radius:50%;
            background:rgba(255,255,255,0.25);
            transform:translate(-50%,-50%);
            transition:width 0.6s ease, height 0.6s ease;
        }

        .btn:hover::before{
            width:250px;
            height:250px;
        }

        .btn-edit{
            background:linear-gradient(135deg,#48dbfb,#10b981);
            color:white;
            box-shadow:0 8px 24px rgba(72,219,251,0.4);
        }

        .btn-edit:hover{
            transform:translateY(-2px) scale(1.03);
            box-shadow:0 12px 32px rgba(72,219,251,0.6);
        }

        .btn-delete{
            background:rgba(255,107,107,0.15);
            color:#ff6b6b;
            border:1px solid rgba(255,107,107,0.3);
        }

        .btn-delete:hover{
            background:rgba(255,107,107,0.25);
            transform:translateY(-2px) scale(1.03);
            box-shadow:0 8px 24px rgba(255,107,107,0.5);
        }

        /* EMPTY STATE */
        .empty-state{
            text-align:center;
            padding:40px 20px;
            color:#94a3b8;
        }

        .empty-state i{
            font-size:52px;
            color:#475569;
            margin-bottom:16px;
        }

        .empty-state h3{
            font-size:20px;
            margin-bottom:8px;
            color:#e2e8f0;
        }

        .footer{
            margin-top:32px;
            text-align:center;
            font-size:13px;
            color:#64748b;
            padding:20px;
            border-top:1px solid rgba(72,219,251,0.2);
            font-weight:400;
        }

        .footer a{
            color:#ffc857;
            text-decoration:none;
            transition:all 0.3s ease;
            font-weight:600;
        }

        .footer a:hover{
            color:#ff6b6b;
        }

        @media(max-width:768px){
            body{padding:16px;}
            .navbar{flex-direction:column;align-items:flex-start;gap:12px;}
            .page-header{flex-direction:column;align-items:flex-start;}
            .stats-grid{grid-template-columns:1fr;}
            .page-title{font-size:28px;}
            table{min-width:600px;}
        }
    </style>
</head>
<body>

<div class="container">

    <!-- NAVBAR -->
    <nav class="navbar">
        <a class="navbar-brand" th:href="@{/admin/dashboard}">
            <div class="navbar-brand-icon">
                <i class="fas fa-shield-heart"></i>
            </div>
            AXES Admin
        </a>

        <div class="navbar-actions">
             <a th:href="@{/admin/doctors}" class="nav-btn nav-btn-doctors">
                <span class="nav-icon-pill nav-icon-doctor">
                    <i class="fas fa-user-md"></i>
                </span>
                <span>Doctors</span>
            </a>
           <a th:href="@{/admin/dashboard}" class="nav-btn nav-btn-primary">
                <span class="icon"><i class="fas fa-envelope-open-text"></i></span>
                <span>Go to Dashboard</span>
            </a>
            <a th:href="@{/logoutPage}" class="nav-btn nav-btn-danger">
                <span class="icon"><i class="fas fa-sign-out-alt"></i></span>
                <span>Logout</span>
            </a>
        </div>
    </nav>

    <!-- PAGE HEADER -->
    <header class="page-header">
        <div>
            <div class="page-title">
                <span> Patient Management</span>
            </div>
            <p class="page-subtitle">
                Manage and monitor all patient records in AXES Hospital.
            </p>
        </div>
        <div class="pill">
            AXES Hospital 路 Patients Panel
        </div>
    </header>

    <!-- FLASH MESSAGE -->
    <div th:if="${msg}" class="alert" th:text="${msg}"></div>

    <!-- STATS GRID -->
    <section class="stats-grid" th:if="${patients != null}">
        <div class="stat-card">
            <div class="stat-icon">
                <i class="fas fa-users"></i>
            </div>
            <div>
                <div class="stat-label">Total Patients</div>
                <div class="stat-value" th:text="${#lists.size(patients)}">0</div>
                <div class="stat-extra">
                    <i class="fas fa-arrow-up"></i>
                    <span>Overall registered patients</span>
                </div>
            </div>
        </div>

        <div class="stat-card">
            <div class="stat-icon">
                <i class="fas fa-user-check"></i>
            </div>
            <div>
                <div class="stat-label">Active Today</div>
                <div class="stat-value">48</div>
                <div class="stat-extra">
                    <i class="fas fa-arrow-up"></i>
                    <span>Sample metric 路 optional</span>
                </div>
            </div>
        </div>

        <div class="stat-card">
            <div class="stat-icon">
                <i class="fas fa-user-plus"></i>
            </div>
            <div>
                <div class="stat-label">New This Week</div>
                <div class="stat-value">23</div>
                <div class="stat-extra">
                    <i class="fas fa-arrow-up"></i>
                    <span>Sample growth metric</span>
                </div>
            </div>
        </div>
    </section>

    <!-- MAIN CARD -->
    <section class="card">

        <div class="card-header">
            <div>
                <div class="card-title">
                    <span> Patients List</span>
                    <span class="badge-count"
                          th:text="'Total: ' + (${patients != null} ? ${#lists.size(patients)} : 0)">
                        Total: 0
                    </span>
                </div>
                <div class="card-sub">
                    Search, review, edit or remove patient accounts.
                </div>
            </div>

            <div class="search-wrapper">
                <i class="fas fa-search"></i>
                <input type="text"
                       id="searchInput"
                       class="search-input"
                       placeholder="Search by name, email, phone..."/>
            </div>
        </div>

        <!-- TABLE & DATA -->
        <div th:if="${patients != null and !#lists.isEmpty(patients)}">
            <div class="table-wrapper">
                <table id="patientsTable">
                    <thead>
                    <tr>
                        <th>#</th>
                        <th>Patient Name</th>
                        <th>Email Address</th>
                        <th>Phone Number</th>
                        <th style="text-align:right;">Actions</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr th:each="p, s : ${patients}">
                        <td>
                            <span class="badge" th:text="${s.index + 1}">1</span>
                        </td>
                        <td>
                            <span class="status-indicator status-active"></span>
                            <strong th:text="${p.name}">John Doe</strong>
                        </td>
                        <td class="email-cell"
                            th:text="${p.email != null ? p.email : 'N/A'}">
                            john.doe@example.com
                        </td>
                        <td>
                            <div class="phone-cell">
                                <i class="fas fa-phone-alt"></i>
                                <span th:text="${p.phone != null ? p.phone : 'N/A'}">+91...</span>
                            </div>
                        </td>
                        <td>
                            <div class="actions" style="justify-content:flex-end;">
                                <a th:href="@{'/admin/patients/edit/' + ${p.id}}"
                                   class="btn btn-edit">
                                    <i class="fas fa-edit"></i>
                                    <span>Edit</span>
                                </a>

                                <form th:action="@{'/admin/patients/delete/' + ${p.id}}"
                                      method="post"
                                      onsubmit="return confirm('Are you sure you want to delete this patient?');"
                                      style="display:inline;">
                                    <button type="submit" class="btn btn-delete">
                                        <i class="fas fa-trash-alt"></i>
                                        <span>Delete</span>
                                    </button>
                                </form>
                            </div>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- EMPTY STATE -->
        <div th:if="${patients == null || #lists.isEmpty(patients)}" class="empty-state">
            <i class="fas fa-user-slash"></i>
            <h3>No Patients Found</h3>
            <p>Patients will appear here once they are registered in the system.</p>
        </div>

    </section>

    <!-- FOOTER -->
    <footer class="footer">
        &copy; <span th:text="${#dates.format(#dates.createNow(), 'yyyy')}">2024</span>
        AXES Hospital 路 Admin Panel
    </footer>

</div>

<script>
    const searchInput = document.getElementById('searchInput');
    const table = document.getElementById('patientsTable');

    if (searchInput && table) {
        const rows = table.querySelectorAll('tbody tr');

        searchInput.addEventListener('input', function () {
            const q = this.value.toLowerCase();

            rows.forEach(r => {
                r.style.display = r.textContent.toLowerCase().includes(q) ? '' : 'none';
            });
        });
    }
</script>

</body>
</html>
