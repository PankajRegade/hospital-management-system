<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <title>Admin ¬∑ Dashboard - AXES Hospital</title>

    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>

    <style>
        *{margin:0;padding:0;box-sizing:border-box}
        html{scroll-behavior:smooth;}

        body{
            font-family:'Poppins',sans-serif;
            background:#0a192f;
            color:#e2e8f0;
            min-height:100vh;
            padding:24px;
            overflow-x:hidden;
            position:relative;
        }

        /* Mesh gradient background with aurora effect */
        body::before{
            content:'';
            position:fixed;
            inset:0;
            background:
                radial-gradient(circle at 15% 20%, rgba(255,107,107,0.15), transparent 40%),
                radial-gradient(circle at 85% 30%, rgba(255,200,87,0.12), transparent 40%),
                radial-gradient(circle at 50% 70%, rgba(72,219,251,0.15), transparent 45%),
                radial-gradient(circle at 30% 80%, rgba(147,51,234,0.12), transparent 40%);
            z-index:0;
            pointer-events:none;
            animation:aurora 15s ease-in-out infinite;
        }

        body::after{
            content:'';
            position:fixed;
            inset:0;
            background:
                repeating-linear-gradient(
                    45deg,
                    transparent,
                    transparent 60px,
                    rgba(255,200,87,0.03) 60px,
                    rgba(255,200,87,0.03) 120px
                );
            z-index:0;
            pointer-events:none;
            animation:slide 20s linear infinite;
        }

        @keyframes aurora{
            0%,100%{
                filter:hue-rotate(0deg) brightness(1);
                transform:scale(1) rotate(0deg);
            }
            33%{
                filter:hue-rotate(20deg) brightness(1.1);
                transform:scale(1.05) rotate(2deg);
            }
            66%{
                filter:hue-rotate(-15deg) brightness(0.95);
                transform:scale(0.98) rotate(-1deg);
            }
        }

        @keyframes slide{
            0%{transform:translateX(0) translateY(0)}
            100%{transform:translateX(120px) translateY(120px)}
        }

        @keyframes bounce{
            0%,100%{transform:translateY(0) scale(1)}
            50%{transform:translateY(-5px) scale(1.02)}
        }

        @keyframes rotate{
            from{transform:rotate(0deg)}
            to{transform:rotate(360deg)}
        }

        @keyframes slideInLeft{
            from{opacity:0;transform:translateX(-30px)}
            to{opacity:1;transform:translateX(0)}
        }

        @keyframes slideInUp{
            from{opacity:0;transform:translateY(30px)}
            to{opacity:1;transform:translateY(0)}
        }

        @keyframes scaleIn{
            from{opacity:0;transform:scale(0.9)}
            to{opacity:1;transform:scale(1)}
        }

        @keyframes ripple{
            0%{box-shadow:0 0 0 0 rgba(255,107,107,0.7)}
            100%{box-shadow:0 0 0 20px rgba(255,107,107,0)}
        }

        .container{
            max-width:1400px;
            margin:0 auto;
            position:relative;
            z-index:1;
        }

        /* NAVBAR */
        .navbar{
            background:rgba(15,35,56,0.85);
            backdrop-filter:blur(16px);
            border-radius:20px;
            padding:16px 26px;
            margin-bottom:28px;
            border:1px solid rgba(255,200,87,0.2);
            display:flex;
            justify-content:space-between;
            align-items:center;
            box-shadow:0 8px 32px rgba(0,0,0,0.5);
            animation:slideInUp 0.6s ease;
        }

        .navbar-brand{
            display:flex;
            align-items:center;
            gap:12px;
            font-weight:700;
            font-size:22px;
            text-decoration:none;
            background:linear-gradient(135deg, #ff6b6b, #ffc857);
            -webkit-background-clip:text;
            -webkit-text-fill-color:transparent;
            background-clip:text;
            transition:all 0.3s ease;
        }

        .navbar-brand:hover{
            filter:brightness(1.2);
        }

        .navbar-brand-icon{
            width:42px;
            height:42px;
            border-radius:12px;
            display:flex;
            align-items:center;
            justify-content:center;
            background:linear-gradient(135deg,#ff6b6b,#ffc857);
            color:white;
            box-shadow:0 8px 24px rgba(255,107,107,0.5);
            animation:ripple 2s ease-in-out infinite;
        }

        .navbar-actions{
            display:flex;
            gap:12px;
            flex-wrap:wrap;
            align-items:center;
        }

        .nav-btn{
            padding:10px 20px;
            font-size:13px;
            font-weight:600;
            border-radius:12px;
            border:1px solid rgba(72,219,251,0.3);
            background:rgba(15,35,56,0.7);
            color:#48dbfb;
            text-decoration:none;
            display:inline-flex;
            align-items:center;
            gap:8px;
            transition:all 0.3s cubic-bezier(0.4,0,0.2,1);
            position:relative;
        }

        .nav-btn::after{
            content:'';
            position:absolute;
            bottom:0;
            left:50%;
            width:0;
            height:2px;
            background:linear-gradient(90deg, #48dbfb, #ffc857);
            transform:translateX(-50%);
            transition:width 0.3s ease;
        }

        .nav-btn:hover::after{
            width:80%;
        }

        .nav-btn:hover{
            border-color:#48dbfb;
            background:rgba(72,219,251,0.1);
            transform:translateY(-2px);
        }

        .nav-btn-primary{
            border:none;
            background:linear-gradient(135deg,#ff6b6b,#ffc857);
            color:white;
            font-weight:600;
            box-shadow:0 8px 24px rgba(255,107,107,0.4);
        }

        .nav-btn-primary:hover{
            transform:translateY(-3px) scale(1.05);
            box-shadow:0 12px 32px rgba(255,107,107,0.6);
        }

        .nav-btn-danger{
            border:1px solid rgba(239,68,68,0.4);
            background:rgba(239,68,68,0.1);
            color:#ff6b6b;
        }

        .nav-btn-danger:hover{
            background:rgba(239,68,68,0.2);
            box-shadow:0 8px 24px rgba(239,68,68,0.4);
        }

        /* NEW: icon pill styles for Doctors & Patients */
        .nav-icon-pill{
            width:26px;
            height:26px;
            border-radius:999px;
            display:flex;
            align-items:center;
            justify-content:center;
            font-size:13px;
        }

        .nav-icon-doctor{
            background:rgba(45,212,191,0.15);
            color:#5eead4;
            box-shadow:0 0 10px rgba(45,212,191,0.5);
        }

        .nav-icon-patient{
            background:rgba(129,140,248,0.18);
            color:#a5b4fc;
            box-shadow:0 0 10px rgba(129,140,248,0.5);
        }

        .nav-btn-doctors{
            border-color:rgba(45,212,191,0.4);
            color:#a5f3fc;
        }

        .nav-btn-doctors:hover{
            background:rgba(45,212,191,0.18);
        }

        .nav-btn-patients{
            border-color:rgba(129,140,248,0.5);
            color:#c7d2fe;
        }

        .nav-btn-patients:hover{
            background:rgba(129,140,248,0.2);
        }

        /* HEADER */
        .page-header{
            margin-bottom:28px;
            display:flex;
            justify-content:space-between;
            gap:20px;
            flex-wrap:wrap;
            align-items:center;
            animation:slideInLeft 0.6s ease 0.2s both;
        }

        .page-title{
            font-size:36px;
            font-weight:800;
            background:linear-gradient(135deg, #ff6b6b, #ffc857, #48dbfb);
            -webkit-background-clip:text;
            -webkit-text-fill-color:transparent;
            background-clip:text;
            display:flex;
            align-items:center;
            gap:12px;
            animation:bounce 3s ease-in-out infinite;
        }

        .page-subtitle{
            font-size:15px;
            color:#94a3b8;
            margin-top:6px;
            font-weight:400;
        }

        .pill{
            padding:10px 18px;
            border-radius:12px;
            font-size:11px;
            text-transform:uppercase;
            letter-spacing:0.12em;
            background:rgba(15,35,56,0.85);
            border:1px solid rgba(255,200,87,0.3);
            color:#ffc857;
            box-shadow:0 4px 16px rgba(255,200,87,0.2);
            font-weight:600;
        }

        /* ALERT */
        .alert{
            background:linear-gradient(135deg, rgba(72,219,251,0.15), rgba(16,185,129,0.15));
            border-left:4px solid #48dbfb;
            padding:16px 20px;
            border-radius:16px;
            margin-bottom:20px;
            color:#48dbfb;
            font-size:14px;
            font-weight:500;
            box-shadow:0 4px 16px rgba(72,219,251,0.2);
            animation:slideInUp 0.4s ease;
            border:1px solid rgba(72,219,251,0.3);
        }

        /* STATS GRID */
        .stats-grid{
            display:grid;
            grid-template-columns:repeat(auto-fit,minmax(240px,1fr));
            gap:22px;
            margin-bottom:32px;
        }

        .stat-card{
            position:relative;
            padding:26px;
            border-radius:20px;
            background:rgba(15,35,56,0.85);
            border:1px solid rgba(72,219,251,0.2);
            box-shadow:0 8px 32px rgba(0,0,0,0.4);
            overflow:hidden;
            transition:all 0.4s cubic-bezier(0.4,0,0.2,1);
            animation:scaleIn 0.5s ease both;
        }

        .stat-card:nth-child(1){animation-delay:0.1s}
        .stat-card:nth-child(2){animation-delay:0.2s}
        .stat-card:nth-child(3){animation-delay:0.3s}

        .stat-card::before{
            content:'';
            position:absolute;
            top:-50%;
            right:-50%;
            width:200%;
            height:200%;
            background:conic-gradient(from 0deg, transparent, rgba(255,200,87,0.1), transparent 30%);
            animation:rotate 6s linear infinite;
            opacity:0;
            transition:opacity 0.4s ease;
        }

        .stat-card:hover::before{
            opacity:1;
        }

        .stat-card:hover{
            transform:translateY(-8px);
            border-color:#ffc857;
            box-shadow:0 16px 48px rgba(255,200,87,0.3);
        }

        .stat-icon{
            width:52px;
            height:52px;
            border-radius:14px;
            display:flex;
            align-items:center;
            justify-content:center;
            margin-bottom:14px;
            background:linear-gradient(135deg,#ff6b6b,#ffc857);
            font-size:22px;
            color:white;
            box-shadow:0 8px 24px rgba(255,107,107,0.5);
            position:relative;
            z-index:1;
        }

        .stat-label{
            font-size:12px;
            text-transform:uppercase;
            letter-spacing:0.12em;
            color:#94a3b8;
            margin-bottom:8px;
            font-weight:600;
            position:relative;
            z-index:1;
        }

        .stat-value{
            font-size:40px;
            font-weight:800;
            background:linear-gradient(135deg, #48dbfb, #ffc857);
            -webkit-background-clip:text;
            -webkit-text-fill-color:transparent;
            background-clip:text;
            position:relative;
            z-index:1;
        }

        .stat-note{
            font-size:12px;
            color:#64748b;
            margin-top:6px;
            font-weight:400;
            position:relative;
            z-index:1;
        }

        /* MAIN CARD */
        .card{
            background:rgba(15,35,56,0.85);
            border-radius:20px;
            border:1px solid rgba(72,219,251,0.2);
            padding:26px;
            box-shadow:0 8px 32px rgba(0,0,0,0.4);
            margin-bottom:22px;
            animation:slideInUp 0.6s ease 0.4s both;
        }

        .card-header{
            display:flex;
            justify-content:space-between;
            align-items:center;
            gap:16px;
            margin-bottom:22px;
            flex-wrap:wrap;
        }

        .card-title{
            font-size:22px;
            font-weight:700;
            color:#e2e8f0;
            display:flex;
            align-items:center;
            gap:10px;
        }

        .card-sub{
            font-size:13px;
            color:#94a3b8;
            margin-top:4px;
            font-weight:400;
        }

        .badge-count{
            font-size:11px;
            padding:8px 14px;
            border-radius:10px;
            background:rgba(255,200,87,0.15);
            color:#ffc857;
            border:1px solid rgba(255,200,87,0.3);
            font-weight:700;
        }

        .table-wrapper{
            overflow-x:auto;
            border-radius:16px;
            border:1px solid rgba(72,219,251,0.2);
            box-shadow:0 4px 16px rgba(0,0,0,0.3);
        }

        table{
            width:100%;
            border-collapse:collapse;
            min-width:700px;
        }

        thead{
            background:linear-gradient(135deg,rgba(255,107,107,0.4),rgba(255,200,87,0.4));
            backdrop-filter:blur(10px);
        }

        th{
            padding:18px;
            text-align:left;
            font-size:11px;
            text-transform:uppercase;
            letter-spacing:0.12em;
            color:#e2e8f0;
            font-weight:700;
            border-bottom:1px solid rgba(255,200,87,0.3);
        }

        td{
            padding:18px;
            font-size:14px;
            color:#cbd5e1;
            border-bottom:1px solid rgba(30,58,88,0.5);
            background:rgba(10,25,47,0.6);
            font-weight:400;
        }

        tbody tr{
            transition:all 0.3s cubic-bezier(0.4,0,0.2,1);
        }

        tbody tr:hover td{
            background:rgba(15,35,56,0.8);
            transform:translateX(5px);
        }

        .tag{
            display:inline-flex;
            align-items:center;
            padding:5px 12px;
            border-radius:10px;
            font-size:11px;
            background:rgba(72,219,251,0.15);
            border:1px solid rgba(72,219,251,0.3);
            color:#48dbfb;
            gap:6px;
            font-weight:600;
        }

        .tag-dot{
            width:8px;
            height:8px;
            border-radius:50%;
            background:#48dbfb;
            box-shadow:0 0 10px rgba(72,219,251,1);
            animation:blink 2s ease-in-out infinite;
        }

        @keyframes blink{
            0%,100%{opacity:1}
            50%{opacity:0.3}
        }

        .actions{
            display:flex;
            flex-wrap:wrap;
            gap:10px;
        }

        .btn{
            border:none;
            padding:10px 18px;
            border-radius:12px;
            font-size:12px;
            font-weight:700;
            cursor:pointer;
            display:inline-flex;
            align-items:center;
            gap:6px;
            text-decoration:none;
            transition:all 0.3s cubic-bezier(0.4,0,0.2,1);
            white-space:nowrap;
            position:relative;
            overflow:hidden;
        }

        .btn::before{
            content:'';
            position:absolute;
            top:50%;
            left:50%;
            width:0;
            height:0;
            border-radius:50%;
            background:rgba(255,255,255,0.3);
            transform:translate(-50%,-50%);
            transition:width 0.6s ease, height 0.6s ease;
        }

        .btn:hover::before{
            width:300px;
            height:300px;
        }

        .btn-approve{
            background:linear-gradient(135deg,#48dbfb,#10b981);
            color:white;
            box-shadow:0 8px 24px rgba(72,219,251,0.4);
            position:relative;
            z-index:1;
        }

        .btn-approve:hover{
            transform:translateY(-2px) scale(1.05);
            box-shadow:0 12px 32px rgba(72,219,251,0.6);
        }

        .btn-reject{
            background:rgba(255,107,107,0.15);
            color:#ff6b6b;
            border:1px solid rgba(255,107,107,0.3);
            position:relative;
            z-index:1;
        }

        .btn-reject:hover{
            background:rgba(255,107,107,0.25);
            transform:translateY(-2px) scale(1.05);
            box-shadow:0 8px 24px rgba(255,107,107,0.5);
        }

        /* EMPTY STATE */
        .empty-card{
            text-align:left;
            font-size:14px;
            color:#94a3b8;
        }

        .empty-card .card-title{
            color:#48dbfb;
        }

        /* FOOTER */
        .footer{
            margin-top:32px;
            text-align:center;
            font-size:13px;
            color:#64748b;
            padding:20px;
            border-top:1px solid rgba(72,219,251,0.2);
            font-weight:400;
        }

        .footer a{
            color:#ffc857;
            text-decoration:none;
            transition:all 0.3s ease;
            font-weight:600;
        }

        .footer a:hover{
            color:#ff6b6b;
        }

        @media(max-width:768px){
            body{padding:16px;}
            .navbar{flex-direction:column;align-items:flex-start;gap:12px;}
            .page-header{flex-direction:column;align-items:flex-start;}
            .stats-grid{grid-template-columns:1fr;}
            .page-title{font-size:28px;}
        }
        
        /* =========================
   ADMIN DASHBOARD ‚Äì MOBILE FIX
   ========================= */

/* Tablets & below */
@media (max-width: 1024px) {
  .container {
    padding: 0;
  }

  .page-title {
    font-size: 30px;
  }
}

/* Mobile devices */
@media (max-width: 768px) {

  body {
    padding: 16px 12px;
  }

  /* NAVBAR */
  .navbar {
    flex-direction: column;
    align-items: stretch;
    padding: 16px;
    gap: 14px;
  }

  .navbar-brand {
    justify-content: center;
    font-size: 20px;
  }

  .navbar-actions {
    justify-content: center;
    gap: 10px;
  }

  .nav-btn {
    font-size: 12px;
    padding: 8px 14px;
  }

  /* PAGE HEADER */
  .page-header {
    flex-direction: column;
    align-items: flex-start;
    gap: 12px;
  }

  .page-title {
    font-size: 26px;
  }

  .page-subtitle {
    font-size: 14px;
  }

  .pill {
    align-self: flex-start;
    font-size: 10px;
    padding: 8px 14px;
  }

  /* STATS */
  .stats-grid {
    grid-template-columns: 1fr;
    gap: 16px;
  }

  .stat-card {
    padding: 20px;
  }

  .stat-value {
    font-size: 32px;
  }

  /* TABLE */
  .table-wrapper {
    overflow-x: auto;
  }

  table {
    min-width: 900px;
  }

  th, td {
    padding: 14px;
    font-size: 13px;
  }

  /* ACTION BUTTONS */
  .actions {
    gap: 8px;
    justify-content: flex-end;
  }

  .btn {
    font-size: 11px;
    padding: 8px 12px;
  }

  /* CARDS */
  .card {
    padding: 20px;
  }

  .card-title {
    font-size: 18px;
  }

  .card-sub {
    font-size: 13px;
  }
}

/* Small phones */
@media (max-width: 480px) {

  body {
    padding: 14px 10px;
  }

  .navbar {
    padding: 14px;
    border-radius: 16px;
  }

  .navbar-brand-icon {
    width: 36px;
    height: 36px;
  }

  .navbar-brand {
    font-size: 18px;
  }

  .page-title {
    font-size: 22px;
  }

  .stat-value {
    font-size: 28px;
  }

  .footer {
    font-size: 12px;
    padding: 16px;
  }
}
        
    </style>
</head>
<body>

<div class="container">

    <!-- NAVBAR -->
    <nav class="navbar">
        <a class="navbar-brand" th:href="@{/admin/dashboard}">
            <div class="navbar-brand-icon">
                <i class="fas fa-shield-heart"></i>
            </div>
            AXES Admin
        </a>

        <div class="navbar-actions">
            <a th:href="@{/admin/doctors}" class="nav-btn nav-btn-doctors">
                <span class="nav-icon-pill nav-icon-doctor">
                    <i class="fas fa-user-md"></i>
                </span>
                <span>Doctors</span>
            </a>
            <a th:href="@{/admin/patients}" class="nav-btn nav-btn-patients">
                <span class="nav-icon-pill nav-icon-patient">
                    <i class="fas fa-users"></i>
                </span>
                <span>Patients</span>
            </a>
            <a th:href="@{/admin/contacts}" class="nav-btn nav-btn-primary">
                <span class="icon"><i class="fas fa-envelope-open-text"></i></span>
                <span>Get in Touch Requests</span>
            </a>
            <a th:href="@{/logoutPage}" class="nav-btn nav-btn-danger">
                <span class="icon"><i class="fas fa-sign-out-alt"></i></span>
                <span>Logout</span>
            </a>
        </div>
    </nav>

    <!-- PAGE HEADER -->
    <header class="page-header">
        <div>
            <div class="page-title">
                <span>üìä Admin Dashboard</span>
            </div>
            <p class="page-subtitle">
                Review doctor approvals, track counts and manage your hospital users.
            </p>
        </div>
        <div class="pill">
            AXES Hospital ¬∑ Control Panel
        </div>
    </header>

    <!-- FLASH MESSAGE -->
    <div th:if="${msg}" class="alert" th:text="${msg}"></div>

    <!-- STATS GRID -->
    <section class="stats-grid">
        <div class="stat-card">
            <div class="stat-icon">
                <i class="fas fa-user-md"></i>
            </div>
            <div>
                <div class="stat-label">Total Doctors</div>
                <div class="stat-value" th:text="${totalDoctors}">0</div>
                <div class="stat-note">All registered doctors in system</div>
            </div>
        </div>

        <div class="stat-card">
            <div class="stat-icon">
                <i class="fas fa-hourglass-half"></i>
            </div>
            <div>
                <div class="stat-label">Pending Approvals</div>
                <div class="stat-value" th:text="${pendingCount}">0</div>
                <div class="stat-note">Waiting for your review</div>
            </div>
        </div>

        <div class="stat-card">
            <div class="stat-icon">
                <i class="fas fa-circle-check"></i>
            </div>
            <div>
                <div class="stat-label">Approved Doctors</div>
                <div class="stat-value" th:text="${approvedCount}">0</div>
                <div class="stat-note">Active & visible to patients</div>
            </div>
        </div>
    </section>

    <!-- PENDING DOCTOR REQUESTS -->
    <section th:if="${pendingDoctors != null and !#lists.isEmpty(pendingDoctors)}" class="card">
        <div class="card-header">
            <div>
                <div class="card-title">
                    <span>‚è≥ Pending Doctor Approvals</span>
                    <span class="badge-count" th:text="'Total: ' + ${pendingCount}">Total: 0</span>
                </div>
                <div class="card-sub">
                    Review details and approve or reject new doctor registrations.
                </div>
            </div>
        </div>

        <div class="table-wrapper">
            <table>
                <thead>
                <tr>
                    <th>#</th>
                    <th>Doctor Name</th>
                    <th>Specialization</th>
                    <th>Email</th>
                    <th>Phone</th>
                    <th style="text-align:right;">Actions</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="d, s : ${pendingDoctors}">
                    <td>
                        <span class="tag">
                            <span class="tag-dot"></span>
                            <span th:text="${s.index + 1}">1</span>
                        </span>
                    </td>
                    <td th:text="${d.name}">Doctor Name</td>
                    <td th:text="${d.specialization != null ? d.specialization : 'General'}">Specialization</td>
                    <td th:text="${d.email}">doctor@example.com</td>
                    <td th:text="${d.phone}">+91...</td>
                    <td>
                        <div class="actions" style="justify-content:flex-end;">
                            <!-- APPROVE -->
                            <form th:action="@{'/admin/doctors/' + ${d.id} + '/approve'}"
                                  method="post"
                                  style="display:inline;">
                                <button type="submit" class="btn btn-approve">
                                    <i class="fas fa-check"></i> Approve
                                </button>
                            </form>

                            <!-- REJECT -->
                           <form th:action="@{/admin/doctors/{id}/reject(id=${d.id})}"
      method="post"
      onsubmit="return confirm('Reject doctor and delete credentials?');">

    <button type="submit" class="btn btn-reject">
    <i class="fas fa-times"></i> Reject
</button>

                        </div>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </section>

    <!-- EMPTY STATE -->
    <section class="card empty-card"
             th:if="${pendingDoctors == null or #lists.isEmpty(pendingDoctors)}">
        <div class="card-title" style="margin-bottom:8px;">
            ‚úÖ No Pending Doctor Requests
        </div>
        <p class="card-sub">
            All doctor accounts are reviewed and up to date. You can check
            <a th:href="@{/admin/doctors}" style="color:#ffc857;text-decoration:none;font-weight:600;">all doctors</a>
            any time.
        </p>
    </section>

    <!-- FOOTER -->
    <footer class="footer">
        &copy; <span th:text="${#dates.format(#dates.createNow(), 'yyyy')}">2024</span>
        AXES Hospital ¬∑ Admin Panel
    </footer>

</div>

</body>
</html>
