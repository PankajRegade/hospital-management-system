<!doctype html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Manage Appointments</title>

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">

  <style>
    *{margin:0;padding:0;box-sizing:border-box}
    body{
      font-family:'Poppins',sans-serif;
      background:linear-gradient(135deg,#0a1929,#001f3f,#03045e);
      min-height:100vh;
      padding:24px;
      color:#fff;
    }

    body::before{
      content:'';
      position:fixed;
      inset:0;
      background:
        radial-gradient(circle at 20% 30%, rgba(0,180,216,.2), transparent 40%),
        radial-gradient(circle at 80% 70%, rgba(0,119,182,.18), transparent 40%);
      animation:drift 25s ease-in-out infinite;
      z-index:-1;
    }

    @keyframes drift{
      0%,100%{transform:translate(0,0)}
      50%{transform:translate(-30px,30px)}
    }

    .container{max-width:1200px;margin:auto}

    .header{
      display:flex;
      justify-content:space-between;
      align-items:center;
      background:rgba(255,255,255,.06);
      backdrop-filter:blur(20px);
      padding:20px 24px;
      border-radius:18px;
      margin-bottom:24px;
      box-shadow:0 12px 40px rgba(0,0,0,.4);
    }

    .header h1{
      font-size:26px;
      font-weight:800;
      display:flex;
      align-items:center;
      gap:12px;
    }

    .back-btn{
      text-decoration:none;
      padding:10px 18px;
      border-radius:12px;
      background:linear-gradient(135deg,#00b4d8,#0077b6);
      color:#fff;
      font-weight:700;
      display:flex;
      gap:8px;
      align-items:center;
    }

    .card{
      background:rgba(255,255,255,.06);
      backdrop-filter:blur(20px);
      padding:24px;
      border-radius:18px;
      box-shadow:0 14px 48px rgba(0,0,0,.45);
    }

    table{
      width:100%;
      border-collapse:separate;
      border-spacing:0;
      border-radius:14px;
      overflow:hidden;
    }

    thead{
      background:linear-gradient(135deg,#00b4d8,#0077b6);
    }

    th,td{
      padding:14px 16px;
      text-align:left;
    }

    th{
      font-size:13px;
      text-transform:uppercase;
      letter-spacing:.5px;
    }

    td{
      background:rgba(255,255,255,.04);
      border-bottom:1px solid rgba(255,255,255,.05);
    }

    tbody tr:hover{
      background:rgba(0,180,216,.15);
      transform:translateX(4px);
      transition:.3s;
    }

    .badge{
      padding:6px 12px;
      border-radius:999px;
      font-weight:700;
      background:rgba(0,180,216,.25);
      border:1px solid rgba(0,180,216,.4);
    }

    .delete-btn{
      background:linear-gradient(135deg,#ef4444,#dc2626);
      border:none;
      padding:8px 14px;
      border-radius:10px;
      color:#fff;
      font-weight:700;
      cursor:pointer;
      display:flex;
      gap:6px;
      align-items:center;
    }

    .delete-btn:hover{
      box-shadow:0 10px 28px rgba(220,38,38,.45);
      transform:translateY(-2px);
    }

    .empty{
      text-align:center;
      padding:50px;
      color:rgba(255,255,255,.6);
    }

    .empty i{
      font-size:54px;
      margin-bottom:12px;
      opacity:.2;
    }
  </style>
</head>
<body>

<div class="container">

  <!-- Header -->
  <div class="header">
    <h1>
      <i class="fas fa-history"></i>
      Past Appointments
    </h1>

    <a th:href="@{/doctor/dashboard}" class="back-btn">
      <i class="fas fa-arrow-left"></i>
      Back to Dashboard
    </a>
  </div>

  <!-- Table Card -->
  <div class="card">

    <div th:if="${appointments == null or #lists.isEmpty(appointments)}" class="empty">
      <i class="fas fa-calendar-xmark"></i>
      <p>No past appointments found</p>
    </div>

    <table th:if="${appointments != null and !#lists.isEmpty(appointments)}">
      <thead>
        <tr>
          <th>ID</th>
          <th>Patient</th>
          <th>Date & Time</th>
          <th>Status</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody>
        <tr th:each="a : ${appointments}">
          <td>
            <span class="badge" th:text="${a.id}">1</span>
          </td>
          <td th:text="${a.patient != null ? a.patient.name : '--'}">Patient</td>
          <td th:text="${a.appointmentTime}">2025-01-01</td>
          <td>
            <span class="badge" th:text="${a.status}">COMPLETED</span>
          </td>
          <td>
            <form th:action="@{'/doctor/appointments/' + ${a.id} + '/delete'}"
                  method="post"
                  onsubmit="return confirm('Delete this appointment permanently?');">
              <button type="submit" class="delete-btn">
                <i class="fas fa-trash"></i>
                Delete
              </button>
            </form>
          </td>
        </tr>
      </tbody>
    </table>

  </div>
</div>

</body>
</html>
