<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <title>Admin ¬∑ Doctors - AXES Hospital</title>

    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>

    <style>
        *{margin:0;padding:0;box-sizing:border-box}
        html{scroll-behavior:smooth;}

        body{
            font-family:'Poppins',sans-serif;
            background:#0a192f;
            color:#e2e8f0;
            min-height:100vh;
            padding:24px;
            overflow-x:hidden;
            position:relative;
        }

        /* Mesh gradient background with aurora effect */
        body::before{
            content:'';
            position:fixed;
            inset:0;
            background:
                radial-gradient(circle at 15% 20%, rgba(255,107,107,0.15), transparent 40%),
                radial-gradient(circle at 85% 30%, rgba(255,200,87,0.12), transparent 40%),
                radial-gradient(circle at 50% 70%, rgba(72,219,251,0.15), transparent 45%),
                radial-gradient(circle at 30% 80%, rgba(147,51,234,0.12), transparent 40%);
            z-index:0;
            pointer-events:none;
            animation:aurora 15s ease-in-out infinite;
        }

        body::after{
            content:'';
            position:fixed;
            inset:0;
            background:
                repeating-linear-gradient(
                    45deg,
                    transparent,
                    transparent 60px,
                    rgba(255,200,87,0.03) 60px,
                    rgba(255,200,87,0.03) 120px
                );
            z-index:0;
            pointer-events:none;
            animation:slide 20s linear infinite;
        }

        @keyframes aurora{
            0%,100%{
                filter:hue-rotate(0deg) brightness(1);
                transform:scale(1) rotate(0deg);
            }
            33%{
                filter:hue-rotate(20deg) brightness(1.1);
                transform:scale(1.05) rotate(2deg);
            }
            66%{
                filter:hue-rotate(-15deg) brightness(0.95);
                transform:scale(0.98) rotate(-1deg);
            }
        }

        @keyframes slide{
            0%{transform:translateX(0) translateY(0)}
            100%{transform:translateX(120px) translateY(120px)}
        }

        @keyframes bounce{
            0%,100%{transform:translateY(0) scale(1)}
            50%{transform:translateY(-5px) scale(1.02)}
        }

        @keyframes slideInLeft{
            from{opacity:0;transform:translateX(-30px)}
            to{opacity:1;transform:translateX(0)}
        }

        @keyframes slideInUp{
            from{opacity:0;transform:translateY(30px)}
            to{opacity:1;transform:translateY(0)}
        }

        @keyframes scaleIn{
            from{opacity:0;transform:scale(0.9)}
            to{opacity:1;transform:scale(1)}
        }

        .container{
            max-width:1400px;
            margin:0 auto;
            position:relative;
            z-index:1;
        }

        /* NAVBAR */
        .navbar{
            background:rgba(15,35,56,0.85);
            backdrop-filter:blur(16px);
            border-radius:20px;
            padding:16px 26px;
            margin-bottom:28px;
            border:1px solid rgba(255,200,87,0.2);
            display:flex;
            justify-content:space-between;
            align-items:center;
            box-shadow:0 8px 32px rgba(0,0,0,0.5);
            animation:slideInUp 0.6s ease;
        }

        .navbar-brand{
            display:flex;
            align-items:center;
            gap:12px;
            font-weight:700;
            font-size:22px;
            text-decoration:none;
            background:linear-gradient(135deg, #ff6b6b, #ffc857);
            -webkit-background-clip:text;
            -webkit-text-fill-color:transparent;
            background-clip:text;
            transition:all 0.3s ease;
        }

        .navbar-brand:hover{
            filter:brightness(1.2);
        }

        .navbar-brand-icon{
            width:42px;
            height:42px;
            border-radius:12px;
            display:flex;
            align-items:center;
            justify-content:center;
            background:linear-gradient(135deg,#ff6b6b,#ffc857);
            color:white;
            box-shadow:0 8px 24px rgba(255,107,107,0.5);
        }

        .navbar-actions{
            display:flex;
            gap:12px;
            flex-wrap:wrap;
            align-items:center;
        }

        .nav-btn{
            padding:10px 20px;
            font-size:13px;
            font-weight:600;
            border-radius:12px;
            border:1px solid rgba(72,219,251,0.3);
            background:rgba(15,35,56,0.7);
            color:#48dbfb;
            text-decoration:none;
            display:inline-flex;
            align-items:center;
            gap:8px;
            transition:all 0.3s cubic-bezier(0.4,0,0.2,1);
            position:relative;
        }

        .nav-btn:hover{
            border-color:#48dbfb;
            background:rgba(72,219,251,0.1);
            transform:translateY(-2px);
        }

        .nav-btn-primary{
            border:none;
            background:linear-gradient(135deg,#ff6b6b,#ffc857);
            color:white;
            font-weight:600;
            box-shadow:0 8px 24px rgba(255,107,107,0.4);
        }

        .nav-btn-danger{
            border:1px solid rgba(239,68,68,0.4);
            background:rgba(239,68,68,0.1);
            color:#ff6b6b;
        }

        .nav-btn-danger:hover{
            background:rgba(239,68,68,0.2);
            box-shadow:0 8px 24px rgba(239,68,68,0.4);
        }

        /* Active / current page pill */
        .nav-btn-active{
            background:rgba(72,219,251,0.18);
            border-color:#48dbfb;
            color:#e2e8f0;
        }

        /* PAGE HEADER */
        .page-header{
            margin-bottom:28px;
            display:flex;
            justify-content:space-between;
            gap:20px;
            flex-wrap:wrap;
            align-items:center;
            animation:slideInLeft 0.6s ease 0.2s both;
        }

        .page-title{
            font-size:36px;
            font-weight:800;
            background:linear-gradient(135deg, #ff6b6b, #ffc857, #48dbfb);
            -webkit-background-clip:text;
            -webkit-text-fill-color:transparent;
            background-clip:text;
            display:flex;
            align-items:center;
            gap:12px;
            animation:bounce 3s ease-in-out infinite;
        }

        .page-subtitle{
            font-size:15px;
            color:#94a3b8;
            margin-top:6px;
            font-weight:400;
        }

        .pill{
            padding:10px 18px;
            border-radius:12px;
            font-size:11px;
            text-transform:uppercase;
            letter-spacing:0.12em;
            background:rgba(15,35,56,0.85);
            border:1px solid rgba(255,200,87,0.3);
            color:#ffc857;
            box-shadow:0 4px 16px rgba(255,200,87,0.2);
            font-weight:600;
        }

        /* ALERT */
        .alert{
            background:linear-gradient(135deg, rgba(72,219,251,0.15), rgba(16,185,129,0.15));
            border-left:4px solid #48dbfb;
            padding:16px 20px;
            border-radius:16px;
            margin-bottom:20px;
            color:#48dbfb;
            font-size:14px;
            font-weight:500;
            box-shadow:0 4px 16px rgba(72,219,251,0.2);
            border:1px solid rgba(72,219,251,0.3);
        }

        /* STATS CARD */
        .stats-grid{
            display:grid;
            grid-template-columns:repeat(auto-fit,minmax(240px,1fr));
            gap:22px;
            margin-bottom:32px;
        }

        .stat-card{
            position:relative;
            padding:24px;
            border-radius:20px;
            background:rgba(15,35,56,0.85);
            border:1px solid rgba(72,219,251,0.2);
            box-shadow:0 8px 32px rgba(0,0,0,0.4);
            overflow:hidden;
            transition:all 0.4s cubic-bezier(0.4,0,0.2,1);
            animation:scaleIn 0.5s ease both;
        }

        .stat-card::before{
            content:'';
            position:absolute;
            top:-50%;
            right:-50%;
            width:200%;
            height:200%;
            background:conic-gradient(from 0deg, transparent, rgba(255,200,87,0.1), transparent 30%);
            opacity:0;
            transition:opacity 0.4s ease;
        }

        .stat-card:hover::before{
            opacity:1;
        }

        .stat-card:hover{
            transform:translateY(-8px);
            border-color:#ffc857;
            box-shadow:0 16px 48px rgba(255,200,87,0.3);
        }

        .stat-icon{
            width:52px;
            height:52px;
            border-radius:14px;
            display:flex;
            align-items:center;
            justify-content:center;
            margin-bottom:14px;
            background:linear-gradient(135deg,#ff6b6b,#ffc857);
            font-size:22px;
            color:white;
            box-shadow:0 8px 24px rgba(255,107,107,0.5);
        }

        .stat-label{
            font-size:12px;
            text-transform:uppercase;
            letter-spacing:0.12em;
            color:#94a3b8;
            margin-bottom:8px;
            font-weight:600;
        }

        .stat-value{
            font-size:34px;
            font-weight:800;
            background:linear-gradient(135deg, #48dbfb, #ffc857);
            -webkit-background-clip:text;
            -webkit-text-fill-color:transparent;
            background-clip:text;
        }

        /* MAIN CARD */
        .card{
            background:rgba(15,35,56,0.85);
            border-radius:20px;
            border:1px solid rgba(72,219,251,0.2);
            padding:26px;
            box-shadow:0 8px 32px rgba(0,0,0,0.4);
            margin-bottom:22px;
            animation:slideInUp 0.6s ease 0.3s both;
        }

        .card-header{
            display:flex;
            justify-content:space-between;
            align-items:center;
            gap:16px;
            margin-bottom:22px;
            flex-wrap:wrap;
        }

        .card-title{
            font-size:22px;
            font-weight:700;
            color:#e2e8f0;
            display:flex;
            align-items:center;
            gap:10px;
        }

        .card-sub{
            font-size:13px;
            color:#94a3b8;
            margin-top:4px;
            font-weight:400;
        }

        .badge-count{
            font-size:11px;
            padding:8px 14px;
            border-radius:10px;
            background:rgba(255,200,87,0.15);
            color:#ffc857;
            border:1px solid rgba(255,200,87,0.3);
            font-weight:700;
        }

        /* SEARCH INPUT */
        .search-input{
            width:100%;
            padding:12px 16px;
            border-radius:12px;
            border:1px solid rgba(148,163,184,0.45);
            background:rgba(10,25,47,0.9);
            color:#e2e8f0;
            font-size:13px;
            margin-bottom:18px;
            outline:none;
            transition:all 0.3s ease;
        }

        .search-input::placeholder{
            color:#64748b;
        }

        .search-input:focus{
            border-color:#48dbfb;
            box-shadow:0 0 0 1px rgba(72,219,251,0.5);
            background:rgba(15,35,56,0.95);
        }

        /* TABLE */
        .table-wrapper{
            overflow-x:auto;
            border-radius:16px;
            border:1px solid rgba(72,219,251,0.2);
            box-shadow:0 4px 16px rgba(0,0,0,0.3);
        }

        table{
            width:100%;
            border-collapse:collapse;
            min-width:700px;
        }

        thead{
            background:linear-gradient(135deg,rgba(255,107,107,0.4),rgba(255,200,87,0.4));
            backdrop-filter:blur(10px);
        }

        th{
            padding:16px 18px;
            text-align:left;
            font-size:11px;
            text-transform:uppercase;
            letter-spacing:0.12em;
            color:#e2e8f0;
            font-weight:700;
            border-bottom:1px solid rgba(255,200,87,0.3);
        }

        td{
            padding:16px 18px;
            font-size:14px;
            color:#cbd5e1;
            border-bottom:1px solid rgba(30,58,88,0.5);
            background:rgba(10,25,47,0.6);
            font-weight:400;
        }

        tbody tr{
            transition:all 0.3s cubic-bezier(0.4,0,0.2,1);
        }

        tbody tr:hover td{
            background:rgba(15,35,56,0.8);
            transform:translateX(5px);
        }

        .badge{
            display:inline-flex;
            align-items:center;
            justify-content:center;
            padding:6px 12px;
            border-radius:10px;
            font-size:11px;
            background:rgba(72,219,251,0.15);
            border:1px solid rgba(72,219,251,0.3);
            color:#48dbfb;
            font-weight:600;
        }

        .specialty-badge{
            display:inline-flex;
            align-items:center;
            padding:6px 14px;
            border-radius:10px;
            font-size:12px;
            background:rgba(56,189,248,0.16);
            border:1px solid rgba(56,189,248,0.4);
            color:#7dd3fc;
            font-weight:600;
        }

        .actions{
            display:flex;
            flex-wrap:wrap;
            gap:10px;
        }

        .btn{
            border:none;
            padding:10px 16px;
            border-radius:12px;
            font-size:12px;
            font-weight:700;
            cursor:pointer;
            display:inline-flex;
            align-items:center;
            gap:6px;
            text-decoration:none;
            transition:all 0.3s cubic-bezier(0.4,0,0.2,1);
            white-space:nowrap;
            position:relative;
            overflow:hidden;
        }

        .btn::before{
            content:'';
            position:absolute;
            top:50%;
            left:50%;
            width:0;
            height:0;
            border-radius:50%;
            background:rgba(255,255,255,0.25);
            transform:translate(-50%,-50%);
            transition:width 0.6s ease, height 0.6s ease;
        }

        .btn:hover::before{
            width:250px;
            height:250px;
        }

        .btn-edit{
            background:linear-gradient(135deg,#48dbfb,#10b981);
            color:white;
            box-shadow:0 8px 24px rgba(72,219,251,0.4);
        }

        .btn-edit:hover{
            transform:translateY(-2px) scale(1.03);
            box-shadow:0 12px 32px rgba(72,219,251,0.6);
        }

        .btn-delete{
            background:rgba(255,107,107,0.15);
            color:#ff6b6b;
            border:1px solid rgba(255,107,107,0.3);
        }

        .btn-delete:hover{
            background:rgba(255,107,107,0.25);
            transform:translateY(-2px) scale(1.03);
            box-shadow:0 8px 24px rgba(255,107,107,0.5);
        }

        /* EMPTY STATE */
        .empty-state{
            text-align:center;
            padding:40px 20px;
            color:#94a3b8;
        }

        .empty-state h3{
            font-size:20px;
            margin-bottom:8px;
            color:#e2e8f0;
        }

        .footer{
            margin-top:32px;
            text-align:center;
            font-size:13px;
            color:#64748b;
            padding:20px;
            border-top:1px solid rgba(72,219,251,0.2);
            font-weight:400;
        }

        .footer a{
            color:#ffc857;
            text-decoration:none;
            transition:all 0.3s ease;
            font-weight:600;
        }

        .footer a:hover{
            color:#ff6b6b;
        }

        @media(max-width:768px){
            body{padding:16px;}
            .navbar{flex-direction:column;align-items:flex-start;gap:12px;}
            .page-header{flex-direction:column;align-items:flex-start;}
            .stats-grid{grid-template-columns:1fr;}
            .page-title{font-size:28px;}
        }

        /* üîπ Doctor photo styles */
        .doctor-cell{
            display:flex;
            align-items:center;
            gap:12px;
        }

        .doctor-photo-wrapper{
            width:44px;
            height:44px;
            border-radius:999px;
            overflow:hidden;
            flex-shrink:0;
            background:#1f2937;
            display:flex;
            align-items:center;
            justify-content:center;
        }

        .doctor-photo{
            width:100%;
            height:100%;
            object-fit:cover;
            display:block;
        }

        .doctor-avatar{
            width:44px;
            height:44px;
            border-radius:999px;
            background:linear-gradient(135deg,#ff6b6b,#ffc857);
            display:flex;
            align-items:center;
            justify-content:center;
            color:#fff;
            font-size:18px;
        }

        .doctor-name{
            font-weight:600;
            color:#e2e8f0;
        }

        .doctor-id{
            font-size:12px;
            color:#94a3b8;
        }
    </style>
</head>

<body>

<div class="container">

    <!-- NAVBAR (Doctors button removed on this page) -->
    <nav class="navbar">
        <a class="navbar-brand" th:href="@{/admin/dashboard}">
            <div class="navbar-brand-icon">
                <i class="fas fa-shield-heart"></i>
            </div>
            AXES Admin
        </a>

        <div class="navbar-actions">
            <!-- Doctors button removed here -->
            <a th:href="@{/admin/patients}" class="nav-btn nav-btn-patients">
                <span class="nav-icon-pill nav-icon-patient">
                    <i class="fas fa-users"></i>
                </span>
                <span>Patients</span>
            </a>
            <a th:href="@{/admin/dashboard}" class="nav-btn nav-btn-primary">
                <span class="icon"><i class="fas fa-envelope-open-text"></i></span>
                <span>Go to Dashboard</span>
            </a>
            <a th:href="@{/logoutPage}" class="nav-btn nav-btn-danger">
                <span class="icon"><i class="fas fa-sign-out-alt"></i></span>
                <span>Logout</span>
            </a>
        </div>
    </nav>

    <!-- PAGE HEADER -->
    <header class="page-header">
        <div>
            <div class="page-title">
                <span>üë®‚Äç‚öïÔ∏è Doctors Management</span>
            </div>
            <p class="page-subtitle">
                View, search, edit and remove doctors from the AXES Hospital system.
            </p>
        </div>
        <div class="pill">
            AXES Hospital ¬∑ Doctors Panel
        </div>
    </header>

    <!-- FLASH MESSAGE -->
    <div th:if="${msg}" class="alert" th:text="${msg}"></div>

    <!-- STATS -->
    <section class="stats-grid" th:if="${doctors != null}">
        <div class="stat-card">
            <div class="stat-icon">
                <i class="fas fa-user-md"></i>
            </div>
            <div>
                <div class="stat-label">Total Doctors</div>
                <div class="stat-value" th:text="${#lists.size(doctors)}">0</div>
                <div class="card-sub">Approved & listed doctors</div>
            </div>
        </div>
    </section>

    <!-- MAIN CARD -->
    <section class="card">

        <div class="card-header">
            <div>
                <div class="card-title">
                    <span>üìã Doctors List</span>
                    <span class="badge-count"
                          th:text="'Total: ' + (${doctors != null} ? ${#lists.size(doctors)} : 0)">
                        Total: 0
                    </span>
                </div>
                <div class="card-sub">
                    Search and manage all registered doctors.
                </div>
            </div>
        </div>

        <!-- DOCTOR LIST -->
        <div th:if="${doctors != null and !#lists.isEmpty(doctors)}">

            <input type="text"
                   id="searchInput"
                   class="search-input"
                   placeholder="Search by name, specialization, email, phone..."/>

            <div class="table-wrapper">
                <table id="doctorsTable">
                    <thead>
                    <tr>
                        <th>#</th>
                        <th>Doctor</th>
                        <th>Specialization</th>
                        <th>Email</th>
                        <th>Phone</th>
                        <th style="text-align:right;">Actions</th>
                    </tr>
                    </thead>

                    <tbody>
                    <tr th:each="d, s : ${doctors}">
                        <td>
                            <span class="badge" th:text="${s.index + 1}">1</span>
                        </td>

                        <!-- üîπ Doctor photo + name + ID -->
                        <td>
                            <div class="doctor-cell">
                                <div class="doctor-photo-wrapper">
                                    <img th:if="${d.photoPath != null}"
                                         th:src="@{${d.photoPath}}"
                                         alt="Doctor photo"
                                         class="doctor-photo">
                                    <div th:if="${d.photoPath == null}" class="doctor-avatar">
                                        <i class="fas fa-user-md"></i>
                                    </div>
                                </div>
                                <div>
                                    <div class="doctor-name" th:text="${d.name}">Doctor Name</div>
                                    <div class="doctor-id" th:text="${'ID: ' + d.id}">ID: 1</div>
                                </div>
                            </div>
                        </td>

                        <td>
                            <span class="specialty-badge"
                                  th:text="${d.specialization != null ? d.specialization : 'General'}">
                                General
                            </span>
                        </td>

                        <td th:text="${d.email != null ? d.email : 'N/A'}">doctor@example.com</td>
                        <td th:text="${d.phone != null ? d.phone : 'N/A'}">+91...</td>

                        <td>
                            <div class="actions" style="justify-content:flex-end;">
                                <a th:href="@{'/admin/doctors/edit/' + ${d.id}}"
                                   class="btn btn-edit">
                                    <i class="fas fa-pen"></i> Edit
                                </a>

                                <form th:action="@{'/admin/doctors/delete/' + ${d.id}}"
                                      method="post"
                                      onsubmit="return confirm('Are you sure you want to delete this doctor?');"
                                      style="display:inline;">
                                    <button type="submit" class="btn btn-delete">
                                        <i class="fas fa-trash"></i> Delete
                                    </button>
                                </form>
                            </div>
                        </td>
                    </tr>
                    </tbody>

                </table>
            </div>
        </div>

        <!-- EMPTY STATE -->
        <div th:if="${doctors == null || #lists.isEmpty(doctors)}" class="empty-state">
            <h3>No Approved Doctors Found</h3>
            <p>Doctors will appear here after they are approved from the dashboard.</p>
        </div>

    </section>

    <!-- FOOTER -->
    <footer class="footer">
        &copy; <span th:text="${#dates.format(#dates.createNow(), 'yyyy')}">2024</span>
        AXES Hospital ¬∑ Admin Panel
    </footer>

</div>

<script>
    const searchInput = document.getElementById("searchInput");
    const table = document.getElementById("doctorsTable");

    if (searchInput && table) {
        searchInput.addEventListener("input", function () {
            const q = this.value.toLowerCase();
            const rows = table.querySelectorAll("tbody tr");

            rows.forEach(r => {
                r.style.display = r.textContent.toLowerCase().includes(q) ? "" : "none";
            });
        });
    }
</script>

</body>
</html>
